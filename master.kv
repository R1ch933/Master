ScreenManager
    Start:
        id: start_screen
        Login:
            id: login
    Main_Menu:
        id: main_screen
        Menu_Select:
            logger: logger
            id: menu_select
    Create_Screen:
        id: create_account
        Create:
            id: create
    Create_Log:
        id: create_log
        Create_Log_GUI:
            logger: logger
            id: create_log_gui
    Log_Screen:
        id: log_scrn
        Log:
            menu_select: menu_select
            create_log_gui: create_log_gui
            id: logger
    Acc_Set:
        id: acc_scrn
        Account:
            id: account
<Wrong_Password>:
    wrong_label: wrong_label
    Label:
        text: "You Entered The Wrong Password Or Left Something Blank"
        id: wrong_label
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.55}
<Empty>:
    wrong_label: wrong_label
    Label:
        text: "New Password Cannot Match Old Password"
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.55}
<Change_Password>:
    new_pass: new_pass
    old_pass: old_pass
    old_input: old_input
    new_input: new_input
    Label:
        text: 'Please Enter The Old And New Password'
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.9}
    Label:
        id: old_pass
        text: 'Original Password'
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.75}
    Label:
        id: new_pass
        text: 'New Password'
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.55}
    TextInput:
        id: old_input
        size_hint: .6, .1
        pos_hint: {"x":.2,"top":.6}
    TextInput:
        id: new_input
        size_hint: .6, .1
        pos_hint: {"x":.2,"top":.4}
    Button:
        text: "Reset"
        size_hint: .3, .1
        pos_hint: {"x":.35,"top":.2}
        on_release:
            root.reset_password()

<Del_Acc>:
    Label:
        text: 'Are you sure?'
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.8}
    Button:
        text: "Yes"
        size_hint: .2, .2
        pos_hint: {"x":.25, "top": .4}
        on_release:
            app.root.current = 'start'
            app.root.transition.direction= 'right'
            root.close_popup()
            root.delete_account()
    Button:
        size_hint: .2, .2
        pos_hint: {"x":.55, "top": .4}
        text: "No"
        auto_dismiss: False
        on_release:
            root.close_popup()
<Acc_Set>:
    name: 'account screen'
<Account>:
    canvas.before:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size

    Widget:
        canvas.before:
            Color:
                rgba: 0,0,0,.5
            Rectangle:
                pos: self.pos
                size: self.size
        size: root.width*.4, root.height*.8
        pos: root.width*.3, root.height*.1
    Label:
        font_size: 20
        canvas.before:
            Color:
                rgba: .0,.0,.0,0
            Rectangle:
                pos: self.pos
                size: self.size
        color: 0,0,0,1
        text: "Account Settings"
        size: root.width*.3, root.height*.15
        pos: root.width*.35, root.height*.7

    Button:
        text: "Back"
        size: root.width *.15,root.height*.05
        pos: root.width*.43, root.height* .2
        on_release:
            app.root.current = 'main menu'
            app.root.transition.direction = 'right'
    Button:
        text: "Reset Password"
        size: root.width *.25,root.height*.1
        pos: root.width*.38, root.height* .6
        on_release:
            root.change_password_popup()

    Button:
        text: "Delete Account"
        size: root.width *.25,root.height*.1
        pos: root.width*.38, root.height* .45
        on_release:
            root.delete_account_popup()



<Create_Log>:
    name: 'create log'
<Create_Log_GUI>:
    app_password: app_password
    application: application
    canvas.before:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
    Widget:
        canvas.before:
            Color:
                rgba: 0,0,0,.5
            Rectangle:
                pos: self.pos
                size: self.size
        size: root.width*.4, root.height*.8
        pos: root.width*.3, root.height*.1
    Label:
        font_size: 20
        canvas.before:
            Color:
                rgba: .0,.0,.0,0
            Rectangle:
                pos: self.pos
                size: self.size
        color: 0,0,0,1
        text: "Create a Log"
        size: root.width*.3, root.height*.15
        pos: root.width*.35, root.height*.7
    Label:
        color: 0,0,0,1
        text: "Name of Application"
        size: root.width*.3, root.height*.05
        pos: root.width*.35, root.height* .65
    TextInput:
        id: application
        multiline: False
        size: root.width *.3,root.height*.05
        pos: root.width*.35, root.height* .6
    Label:
        color: 0,0,0,1
        text: "Password for the application"
        size: root.width*.3, root.height*.05
        pos: root.width*.35, root.height* .5
    TextInput:
        id: app_password
        multiline: False
        size: root.width *.3,root.height*.05
        pos: root.width*.35, root.height* .45
    Button:
        font_size: 10
        text: "Create Log"
        size: root.width *.15,root.height*.05
        pos: root.width*.43, root.height* .3
        on_release:
            root.save_log()
    Button:
        font_size: 10
        text: "Back"
        size: root.width *.15,root.height*.05
        pos: root.width*.43, root.height* .2
        on_release:
            root.clear_text()
            app.root.current = "main menu"
            app.root.transition.direction = 'right'
<Start>:
    name: 'start'
<Wrong_Login>:
    Label:
        text: "You entered a wrong username or password"
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.6}
<account_exists>:
    Label:
        text: "An account already exists"
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.6}
<log_save_popup>:
    Label:
        text: "Log was successful!"
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.6}
<are_you_sure>:
    no_button: no_button
    yes_button: yes_button
    Label:
        text: "Are you sure you want to delete this log?"
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.7}
    Button:
        id: yes_button
        text: "Yes"
        size_hint: .2, .2
        pos_hint: {"x":.25, "top": .3}
        on_release:
            root.Yes()
    Button:
        id: no_button
        text: "No"
        size_hint: .2, .2
        pos_hint: {"x":.55, "top": .3}
        on_release:
            root.No()
<Login>:
    username: username
    password: password
    canvas.before:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
    Widget:
        canvas.before:
            Color:
                rgba: 0,0,0,.5
            Rectangle:
                pos: self.pos
                size: self.size
        size: root.width*.4, root.height*.8
        pos: root.width*.3, root.height*.1
    Label:
        font_size: 20
        canvas.before:
            Color:
                rgba: .0,.0,.0,0
            Rectangle:
                pos: self.pos
                size: self.size
        color: 0,0,0,1
        text: "Master Password App"
        size: root.width*.3, root.height*.15
        pos: root.width*.35, root.height*.7
    Label:
        color: 0,0,0,1
        text: "Username"
        size: root.width*.3, root.height*.05
        pos: root.width*.35, root.height* .65
    TextInput:
        id: username
        multiline: False
        size: root.width *.3,root.height*.05
        pos: root.width*.35, root.height* .6
    Label:
        color: 0,0,0,1
        text: "Password"
        size: root.width*.3, root.height*.05
        pos: root.width*.35, root.height* .5
    TextInput:
        id: password
        multiline: False
        size: root.width *.3,root.height*.05
        pos: root.width*.35, root.height* .45
    Button:
        font_size: 10
        text: "Login"
        size: root.width *.15,root.height*.05
        pos: root.width*.43, root.height* .3
        on_release:
            app.root.current = "main menu" if root.read_files_version_2() == True else "start"
            app.root.transition.direction = 'left'
    Button:
        font_size: 10
        text: "Create Account"
        size: root.width *.15,root.height*.05
        pos: root.width*.43, root.height* .2
        on_release:
            root.clear_text()
            app.root.current = "create screen"
            app.root.transition.direction = 'right'
<Main_Menu>:
    name: 'main menu'
<Create_Screen>:
    name: "create screen"
<blank_login>
    Label:
        text: "Please enter a username and password"
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.6}
<creation_made>:
    Label:
        text: "Your account has been made"
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.6}
<Create>:
    create_username: create_username
    create_password: create_password
    canvas.before:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
    Widget:
        canvas.before:
            Color:
                rgba: 0,0,0,.5
            Rectangle:
                pos: self.pos
                size: self.size
        size: root.width*.4, root.height*.8
        pos: root.width*.3, root.height*.1
    Label:
        font_size: 20
        canvas.before:
            Color:
                rgba: .0,.0,.0,0
            Rectangle:
                pos: self.pos
                size: self.size
        color: 0,0,0,1
        text: "Create an Account"
        size: root.width*.3, root.height*.15
        pos: root.width*.35, root.height*.7
    Label:
        color: 0,0,0,1
        text: "Create Username"
        size: root.width*.3, root.height*.05
        pos: root.width*.35, root.height* .65
    TextInput:
        id: create_username
        multiline: False
        size: root.width *.3,root.height*.05
        pos: root.width*.35, root.height* .6
    Label:
        color: 0,0,0,1
        text: "Create Password"
        size: root.width*.3, root.height*.05
        pos: root.width*.35, root.height* .5
    TextInput:
        id: create_password
        multiline: False
        size: root.width *.3,root.height*.05
        pos: root.width*.35, root.height* .45
    Button:
        font_size: 10
        text: "Create"
        size: root.width *.15,root.height*.05
        pos: root.width*.43, root.height* .3
        on_release:
            app.root.current = "start" if root.save_account() == True else "create screen"
            app.root.transition.direction = 'left'
    Button:
        font_size: 10
        text: "Back"
        size: root.width *.15,root.height*.05
        pos: root.width*.43, root.height* .2
        on_release:
            root.clear_text()
            app.root.current = "start"
            app.root.transition.direction = 'left'
<Menu_Select>:
    canvas.before:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
    Widget:
        size: root.width*.6, root.height*.9
        pos: root.width*.2, root.height*.05
        canvas.before:
            Color:
                rgba: 0,0,0,.5
            Rectangle:
                pos: self.pos
                size: self.size
    Button:
        text: "Create Password Log"
        size: root.width*.5, root.height*.1
        pos: root.width*.25, root.height*.7
        on_release:
            app.root.current = 'create log'
            app.root.transition.direction = 'left'
    Button:
        text: "View Password Logs"
        size: root.width*.5, root.height*.1
        pos: root.width*.25, root.height* .55
        on_release:
            root.checkforlogs()
            root.render_logs_version_2()
            app.root.current = 'log screen'
            app.root.transition.direction = 'left'
    Button:
        text: "Log Out"
        size: root.width*.3, root.height*.1
        pos: root.width*.35, root.height* .35
        on_release:
            root.reset_dict()
            app.root.current = 'start'
            app.root.transition.direction = 'right'
    Button:
        text: "Account Settings"
        size: root.width*.3, root.height*.1
        pos: root.width*.35,root.height*.2
        on_release:
            app.root.current = 'account screen'
            app.root.transition.direction = 'left'

<Log_Screen>:
    name: "log screen"
<Log>:
    log_grid: log_grid
    GridLayout:
        size: root.width, root.height
        id: log_grid
        cols: 3
    Button:
        size: root.width, root.height*.05
        text: "Back"
        on_release:
            root.reset_widgets_version_2()
            app.root.current = 'main menu'
            app.root.transition.direction = 'right'
<No_Logs_Popup>:
    Label:
        text: "You currently have 0 logs"
        size_hint: .6, .2
        pos_hint: {"x":.2,"top":.6}